{"ast":null,"code":"var _jsxFileName = \"/home/alinedebastiani/sd-08-project-recipes-app/src/pages/RecipeDetails.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchRecipes, fetchRecommendations } from '../actions/recipes';\nimport Loading from '../components/Loading';\nimport RecipeCard from '../components/RecipeCard';\nimport IngredientsList from '../components/IngredientsList';\nimport ProgressButton from '../components/ProgressButton';\nimport FavButton from '../components/FavButton';\nimport ShareButton from '../components/ShareButton';\nimport './RecipeDetails.css';\n\nfunction RecipeDetails({\n  match: {\n    params\n  },\n  location: {\n    pathname\n  }\n}) {\n  const {\n    list,\n    isFetching,\n    recommendations\n  } = useSelector(state => state.recipes);\n  const dispatch = useDispatch();\n  const [shouldFetch, setShouldFetch] = useState(true); // const selectType = { comidas: 'meals', bebidas: 'drinks' };\n  // const inProgress = pathname.split('/')[3] === 'in-progress';\n  // const type = selectType[pathname.split('/')[1]];\n  // const type = pathname.split('/')[1];\n  // const recommendationsType = type === 'comidas' ? 'bebidas' : 'comidas';\n\n  const token = 1;\n  const inProgress = pathname.split('/')[3] === 'in-progress'; // const inProgress = pathname.split('/')[3] === 'in-progress';\n\n  const type = pathname.split('/')[1];\n  const recommendationsType = type === 'comidas' ? 'bebidas' : 'comidas';\n  useEffect(() => {\n    // console.log(recommendationsType);\n    dispatch(fetchRecipes(token, type, {\n      request: 'lookup',\n      key: 'i',\n      parameter: params.id\n    }));\n    dispatch(fetchRecommendations(token, recommendationsType));\n    setShouldFetch(false);\n  }, [params]);\n  if (isFetching || shouldFetch) return /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 41\n    }\n  });\n  const recipe = list[0];\n  const IngredientKeys = Object.keys(recipe).filter(ingKey => ingKey.startsWith('strIngredient') && recipe[ingKey] !== '' && recipe[ingKey] !== null);\n  const IngredientsAndMeasures = IngredientKeys.map((key, index) => [recipe[key], recipe[`strMeasure${index + 1}`]]); // const formatedType = type[0].toUpperCase() + type.slice(1, 0 - 1);\n\n  return /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"recipe-photo\",\n    \"data-testid\": \"recipe-photo\",\n    src: recipe.image,\n    alt: recipe.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, recipe.name), /*#__PURE__*/React.createElement(ShareButton, {\n    type: type,\n    id: params.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FavButton, {\n    type: type,\n    recipe: recipe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, `${recipe.alcoholicOrNot} ${recipe.category}`), /*#__PURE__*/React.createElement(IngredientsList, {\n    id: params.id,\n    type: type,\n    ingredients: IngredientsAndMeasures,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, recipe.strInstructions), recipe.strYoutube && /*#__PURE__*/React.createElement(\"iframe\", {\n    src: recipe.strYoutube.split('watch?v=').join('embed/'),\n    title: \"Video\",\n    \"data-testid\": \"video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 12\n    }\n  }), !inProgress && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"recommendations\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, recommendations.map((recommendation, index) => /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": `${index}-recomendation-card`,\n    key: `rec-${index}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(RecipeCard, {\n    index: index,\n    type: recommendationsType,\n    recipe: recommendation,\n    recommendation: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(ProgressButton, {\n    id: params.id,\n    type: type,\n    ingredientsLength: IngredientsAndMeasures.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }));\n}\n\nRecipeDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired\n  }).isRequired\n};\nexport default RecipeDetails;","map":{"version":3,"sources":["/home/alinedebastiani/sd-08-project-recipes-app/src/pages/RecipeDetails.jsx"],"names":["React","useEffect","useState","PropTypes","useDispatch","useSelector","fetchRecipes","fetchRecommendations","Loading","RecipeCard","IngredientsList","ProgressButton","FavButton","ShareButton","RecipeDetails","match","params","location","pathname","list","isFetching","recommendations","state","recipes","dispatch","shouldFetch","setShouldFetch","token","inProgress","split","type","recommendationsType","request","key","parameter","id","recipe","IngredientKeys","Object","keys","filter","ingKey","startsWith","IngredientsAndMeasures","map","index","image","name","alcoholicOrNot","category","strInstructions","strYoutube","join","recommendation","length","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchRecipes, fetchRecommendations } from '../actions/recipes';\n\nimport Loading from '../components/Loading';\nimport RecipeCard from '../components/RecipeCard';\nimport IngredientsList from '../components/IngredientsList';\nimport ProgressButton from '../components/ProgressButton';\nimport FavButton from '../components/FavButton';\nimport ShareButton from '../components/ShareButton';\n\nimport './RecipeDetails.css';\n\nfunction RecipeDetails({ match: { params }, location: { pathname } }) {\n  const { list, isFetching, recommendations } = useSelector((state) => state.recipes);\n  const dispatch = useDispatch();\n\n  const [shouldFetch, setShouldFetch] = useState(true);\n\n  // const selectType = { comidas: 'meals', bebidas: 'drinks' };\n  // const inProgress = pathname.split('/')[3] === 'in-progress';\n  // const type = selectType[pathname.split('/')[1]];\n  // const type = pathname.split('/')[1];\n  // const recommendationsType = type === 'comidas' ? 'bebidas' : 'comidas';\n\n  const token = 1;\n  const inProgress = pathname.split('/')[3] === 'in-progress';\n  // const inProgress = pathname.split('/')[3] === 'in-progress';\n  const type = pathname.split('/')[1];\n  const recommendationsType = type === 'comidas' ? 'bebidas' : 'comidas';\n\n  useEffect(() => {\n    // console.log(recommendationsType);\n    dispatch(fetchRecipes(token, type,\n      { request: 'lookup', key: 'i', parameter: params.id }));\n    dispatch(fetchRecommendations(token, recommendationsType));\n    setShouldFetch(false);\n  }, [params]);\n\n  if (isFetching || shouldFetch) return <Loading />;\n\n  const recipe = list[0];\n  const IngredientKeys = Object.keys(recipe)\n    .filter((ingKey) => (\n      ingKey\n        .startsWith('strIngredient')\n        && recipe[ingKey] !== '' && recipe[ingKey] !== null));\n  const IngredientsAndMeasures = IngredientKeys\n    .map((key, index) => [recipe[key], recipe[`strMeasure${index + 1}`]]);\n  // const formatedType = type[0].toUpperCase() + type.slice(1, 0 - 1);\n\n  return (\n    <section>\n      <img\n        className=\"recipe-photo\"\n        data-testid=\"recipe-photo\"\n        src={ recipe.image }\n        alt={ recipe.name }\n      />\n      <h1 data-testid=\"recipe-title\">{ recipe.name }</h1>\n      <ShareButton type={ type } id={ params.id } />\n      <FavButton type={ type } recipe={ recipe } />\n      <h2 data-testid=\"recipe-category\">\n        { `${recipe.alcoholicOrNot} ${recipe.category}` }\n      </h2>\n      <IngredientsList\n        id={ params.id }\n        type={ type }\n        ingredients={ IngredientsAndMeasures }\n      />\n      <p data-testid=\"instructions\">{ recipe.strInstructions }</p>\n      { recipe.strYoutube\n        && <iframe\n          src={ recipe.strYoutube.split('watch?v=').join('embed/') }\n          title=\"Video\"\n          data-testid=\"video\"\n        /> }\n      { !inProgress && (\n        <div className=\"recommendations\">\n          { recommendations.map((recommendation, index) => (\n            <div data-testid={ `${index}-recomendation-card` } key={ `rec-${index}` }>\n              <RecipeCard\n                index={ index }\n                type={ recommendationsType }\n                recipe={ recommendation }\n                recommendation\n              />\n            </div>)) }\n        </div>)}\n      <ProgressButton\n        id={ params.id }\n        type={ type }\n        ingredientsLength={ IngredientsAndMeasures.length }\n      />\n    </section>\n  );\n}\n\nRecipeDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default RecipeDetails;\n"]},"metadata":{},"sourceType":"module"}