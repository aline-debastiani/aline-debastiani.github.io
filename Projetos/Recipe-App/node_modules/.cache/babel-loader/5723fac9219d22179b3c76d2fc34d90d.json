{"ast":null,"code":"var _jsxFileName = \"/home/alinedebastiani/sd-08-project-recipes-app/src/pages/Main.jsx\";\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport RecipeCard from '../components/RecipeCard';\nimport Loading from '../components/Loading';\nimport CategoryButton from '../components/CategoryButton';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { byAddIngredient, fetchCategories, fetchRecipes } from '../actions/recipes';\n\nfunction Main({\n  location: {\n    pathname\n  }\n}) {\n  const history = useHistory();\n  const {\n    list,\n    isFetching,\n    categories,\n    byIngredient\n  } = useSelector(state => state.recipes);\n  const dispatch = useDispatch();\n  const selectType = {\n    '/comidas': 'meals',\n    '/bebidas': 'drinks'\n  };\n  const idType = {\n    '/comidas': 'idMeal',\n    '/bebidas': 'idDrink'\n  };\n  const type = selectType[pathname];\n  const token = 1;\n\n  const renderRecipes = () => {\n    if (list.length === 0) {\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n      return;\n    }\n\n    if (list.length === 1) {\n      const id = idType[pathname];\n      history.push(`${pathname}/${list[0][id]}`);\n      return;\n    }\n\n    return list.map((recipe, index) => /*#__PURE__*/React.createElement(RecipeCard, {\n      type: type === 'meals' ? 'Meal' : 'Drink',\n      index: index,\n      recipe: recipe,\n      key: `recipe-${index}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  useEffect(() => {\n    dispatch(fetchCategories(token, type));\n\n    if (byIngredient) {\n      dispatch(fetchRecipes(type, {\n        key: 'i',\n        parameter: byIngredient\n      }));\n      dispatch(byAddIngredient(''));\n    } else {\n      dispatch(fetchRecipes(type));\n    }\n  }, [pathname]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), categories.map(category => /*#__PURE__*/React.createElement(CategoryButton, {\n    name: category,\n    key: `btn-${category}`,\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(CategoryButton, {\n    name: \"All\",\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }), isFetching ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 22\n    }\n  }) : renderRecipes(), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }));\n}\n\nMain.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired\n  }).isRequired\n};\nexport default Main;","map":{"version":3,"sources":["/home/alinedebastiani/sd-08-project-recipes-app/src/pages/Main.jsx"],"names":["React","useEffect","PropTypes","useHistory","useDispatch","useSelector","RecipeCard","Loading","CategoryButton","Header","Footer","byAddIngredient","fetchCategories","fetchRecipes","Main","location","pathname","history","list","isFetching","categories","byIngredient","state","recipes","dispatch","selectType","idType","type","token","renderRecipes","length","alert","id","push","map","recipe","index","key","parameter","category","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport RecipeCard from '../components/RecipeCard';\nimport Loading from '../components/Loading';\nimport CategoryButton from '../components/CategoryButton';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { byAddIngredient, fetchCategories, fetchRecipes } from '../actions/recipes';\n\nfunction Main({ location: { pathname } }) {\n  const history = useHistory();\n\n  const {\n    list, isFetching, categories, byIngredient,\n  } = useSelector((state) => state.recipes);\n  const dispatch = useDispatch();\n  const selectType = { '/comidas': 'meals', '/bebidas': 'drinks' };\n  const idType = { '/comidas': 'idMeal', '/bebidas': 'idDrink' };\n  const type = selectType[pathname];\n  const token = 1;\n\n  const renderRecipes = () => {\n    if (list.length === 0) {\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n      return;\n    }\n    if (list.length === 1) {\n      const id = idType[pathname];\n      history.push(`${pathname}/${list[0][id]}`);\n      return;\n    }\n    return list.map((recipe, index) => (\n      <RecipeCard\n        type={ type === 'meals' ? 'Meal' : 'Drink' }\n        index={ index }\n        recipe={ recipe }\n        key={ `recipe-${index}` }\n      />));\n  };\n\n  useEffect(() => {\n    dispatch(fetchCategories(token, type));\n\n    if (byIngredient) {\n      dispatch(fetchRecipes(type,\n        { key: 'i', parameter: byIngredient }));\n      dispatch(byAddIngredient(''));\n    } else {\n      dispatch(fetchRecipes(type));\n    }\n  }, [pathname]);\n\n  return (\n    <>\n      <Header />\n      { categories\n        .map((category) => (\n          <CategoryButton name={ category } key={ `btn-${category}` } type={ type } />))}\n      <CategoryButton name=\"All\" type={ type } />\n      { isFetching ? <Loading /> : renderRecipes() }\n      <Footer />\n    </>\n  );\n}\n\nMain.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}