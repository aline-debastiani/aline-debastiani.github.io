{"ast":null,"code":"import _defineProperty from\"/home/alinedebastiani/sd-08-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/home/alinedebastiani/sd-08-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/alinedebastiani/sd-08-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{useLocation}from'react-router';import{Form}from'react-bootstrap';import{startRecipe}from'../actions/recipes';function IngredientsList(_ref){var type=_ref.type,id=_ref.id,ingredients=_ref.ingredients;var start=useSelector(function(state){return state.recipes.start;});var _useLocation=useLocation(),pathname=_useLocation.pathname;var inProgress=pathname.split('/')[3]==='in-progress';var dispatch=useDispatch();var _useState=useState(start[type][id]||[]),_useState2=_slicedToArray(_useState,2),usedIngredients=_useState2[0],setUsedIngredients=_useState2[1];var handleChange=function handleChange(index){if(usedIngredients.includes(index)){setUsedIngredients(_toConsumableArray(usedIngredients).filter(function(ing){return ing!==index;}));}else{setUsedIngredients([].concat(_toConsumableArray(usedIngredients),[index]));}};useEffect(function(){var cocktails=start.bebidas,meals=start.comidas;localStorage.setItem('inProgressRecipes',JSON.stringify({cocktails:cocktails,meals:meals}));},[start]);useEffect(function(){if(inProgress){dispatch(startRecipe(type,_defineProperty({},id,usedIngredients)));}},[usedIngredients]);if(inProgress){return/*#__PURE__*/React.createElement(Form,null,ingredients.map(function(ingsAndMsr,index){return/*#__PURE__*/React.createElement(Form.Check,{key:\"ing-\".concat(index),type:\"checkbox\"},/*#__PURE__*/React.createElement(\"label\",{\"data-testid\":\"\".concat(index,\"-ingredient-step\"),htmlFor:[ingsAndMsr[0]]},/*#__PURE__*/React.createElement(Form.Check.Input,{checked:usedIngredients.includes(index),id:[ingsAndMsr[0]],onClick:function onClick(){return handleChange(index);},type:\"checkbox\",value:[ingsAndMsr[0]]}),/*#__PURE__*/React.createElement(Form.Check.Label,null,\"\".concat([ingsAndMsr[0]],\" - \").concat([ingsAndMsr[1]]))));}));}return/*#__PURE__*/React.createElement(\"ul\",null,ingredients.map(function(ingsAndMsr,index){return/*#__PURE__*/React.createElement(\"li\",{key:\"ing-\".concat(index),\"data-testid\":\"\".concat(index,\"-ingredient-name-and-measure\")},\"\".concat([ingsAndMsr[0]],\" - \").concat([ingsAndMsr[1]]));}));}export default IngredientsList;","map":{"version":3,"sources":["/home/alinedebastiani/sd-08-project-recipes-app/src/components/IngredientsList.jsx"],"names":["React","useEffect","useState","useDispatch","useSelector","useLocation","Form","startRecipe","IngredientsList","type","id","ingredients","start","state","recipes","pathname","inProgress","split","dispatch","usedIngredients","setUsedIngredients","handleChange","index","includes","filter","ing","cocktails","bebidas","meals","comidas","localStorage","setItem","JSON","stringify","map","ingsAndMsr"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useLocation } from 'react-router';\nimport { Form } from 'react-bootstrap';\nimport { startRecipe } from '../actions/recipes';\n\nfunction IngredientsList({ type, id, ingredients }) {\n  const start = useSelector((state) => state.recipes.start);\n  const { pathname } = useLocation();\n  const inProgress = pathname.split('/')[3] === 'in-progress';\n  const dispatch = useDispatch();\n  const [usedIngredients, setUsedIngredients] = useState(start[type][id] || []);\n\n  const handleChange = (index) => {\n    if (usedIngredients.includes(index)) {\n      setUsedIngredients([...usedIngredients].filter((ing) => ing !== index));\n    } else {\n      setUsedIngredients([...usedIngredients, index]);\n    }\n  };\n\n  useEffect(() => {\n    const { bebidas: cocktails, comidas: meals } = start;\n    localStorage.setItem('inProgressRecipes', JSON.stringify({ cocktails, meals }));\n  }, [start]);\n\n  useEffect(() => {\n    if (inProgress) {\n      dispatch(startRecipe(type, { [id]: usedIngredients }));\n    }\n  }, [usedIngredients]);\n\n  if (inProgress) {\n    return (\n      <Form>\n        { ingredients\n          .map((ingsAndMsr, index) => (\n            <Form.Check key={ `ing-${index}` } type=\"checkbox\">\n              <label\n                data-testid={ `${index}-ingredient-step` }\n                htmlFor={ [ingsAndMsr[0]] }\n              >\n                <Form.Check.Input\n                  checked={ usedIngredients.includes(index) }\n                  id={ [ingsAndMsr[0]] }\n                  onClick={ () => handleChange(index) }\n                  type=\"checkbox\"\n                  value={ [ingsAndMsr[0]] }\n                />\n                <Form.Check.Label>\n                  { `${[ingsAndMsr[0]]} - ${[ingsAndMsr[1]]}` }\n                </Form.Check.Label>\n              </label>\n            </Form.Check>\n          ))}\n      </Form>\n    );\n  }\n\n  return (\n    <ul>\n      { ingredients\n        .map((ingsAndMsr, index) => (\n          <li\n            key={ `ing-${index}` }\n            data-testid={ `${index}-ingredient-name-and-measure` }\n          >\n            { `${[ingsAndMsr[0]]} - ${[ingsAndMsr[1]]}` }\n          </li>))}\n    </ul>\n  );\n}\n\nIngredientsList.propTypes = {\n  type: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n  ingredients: PropTypes.arrayOf(PropTypes.array).isRequired,\n};\n\nexport default IngredientsList;\n"]},"metadata":{},"sourceType":"module"}