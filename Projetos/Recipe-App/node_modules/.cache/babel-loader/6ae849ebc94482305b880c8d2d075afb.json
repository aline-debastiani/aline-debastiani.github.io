{"ast":null,"code":"var _jsxFileName = \"/home/alinedebastiani/sd-08-project-recipes-app/src/pages/Main.jsx\";\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { Alert } from 'react-bootstrap';\nimport RecipeCard from '../components/RecipeCard';\nimport Loading from '../components/Loading';\nimport CategoryButton from '../components/CategoryButton';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { byAddIngredient, fetchCategories, fetchRecipes } from '../actions/recipes';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './Main.css';\n\nfunction Main({\n  location: {\n    pathname\n  }\n}) {\n  const {\n    list,\n    isFetching,\n    categories,\n    byIngredient,\n    filter\n  } = useSelector(state => state.recipes);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const type = pathname.slice(1);\n  const {\n    mealsToken,\n    cocktailsToken\n  } = useSelector(state => state.login);\n\n  const renderRecipes = () => {\n    if (list.length === 0) {\n      alert('Sinto muito, nÃ£o encontramos nenhuma receita para esses filtros.');\n      return /*#__PURE__*/React.createElement(Alert, {\n        style: {\n          marginTop: '20px'\n        },\n        variant: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 9\n        }\n      }, Date.now() % 2 === 0 ? /*#__PURE__*/React.createElement(Alert.Heading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 17\n        }\n      }, \"Uai...\") : /*#__PURE__*/React.createElement(Alert.Heading, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 17\n        }\n      }, \"Oxi...\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }\n      }, \"Redefina o campo de busca.\"));\n    }\n\n    if (list.length === 1 && filter === '') {\n      history.push(`${pathname}/${list[0].id}`);\n      return;\n    }\n\n    return /*#__PURE__*/React.createElement(\"section\", {\n      className: \"cards-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }\n    }, list.map((recipe, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cards-main\",\n      key: `recipe-${index}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(RecipeCard, {\n      type: type,\n      index: index,\n      recipe: recipe,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }\n    }))));\n  };\n\n  useEffect(() => {\n    const reqType = {\n      request: 'filter',\n      key: 'i',\n      parameter: byIngredient\n    };\n    const token = pathname === 'comidas' ? mealsToken : cocktailsToken;\n    dispatch(fetchCategories(token, type));\n\n    if (byIngredient) {\n      dispatch(fetchRecipes(token, type, reqType));\n      dispatch(byAddIngredient(''));\n    } else {\n      dispatch(fetchRecipes(token, type));\n    }\n  }, [pathname]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"nav-catogories\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, categories.map(category => /*#__PURE__*/React.createElement(CategoryButton, {\n    name: category,\n    key: `btn-${category}`,\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(CategoryButton, {\n    name: \"All\",\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  })), isFetching ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 22\n    }\n  }) : renderRecipes(), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }));\n}\n\nMain.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired\n  }).isRequired\n};\nexport default Main;","map":{"version":3,"sources":["/home/alinedebastiani/sd-08-project-recipes-app/src/pages/Main.jsx"],"names":["React","useEffect","PropTypes","useDispatch","useSelector","useHistory","Alert","RecipeCard","Loading","CategoryButton","Header","Footer","byAddIngredient","fetchCategories","fetchRecipes","Main","location","pathname","list","isFetching","categories","byIngredient","filter","state","recipes","dispatch","history","type","slice","mealsToken","cocktailsToken","login","renderRecipes","length","alert","marginTop","Date","now","push","id","map","recipe","index","reqType","request","key","parameter","token","category","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport { Alert } from 'react-bootstrap';\nimport RecipeCard from '../components/RecipeCard';\nimport Loading from '../components/Loading';\nimport CategoryButton from '../components/CategoryButton';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { byAddIngredient, fetchCategories, fetchRecipes } from '../actions/recipes';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './Main.css';\n\nfunction Main({ location: { pathname } }) {\n  const {\n    list, isFetching, categories, byIngredient, filter,\n  } = useSelector((state) => state.recipes);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const type = pathname.slice(1);\n  const { mealsToken, cocktailsToken } = useSelector((state) => state.login);\n\n  const renderRecipes = () => {\n    if (list.length === 0) {\n      alert('Sinto muito, nÃ£o encontramos nenhuma receita para esses filtros.');\n      return (\n        <Alert style={ { marginTop: '20px' } } variant=\"danger\">\n          {\n            (Date.now() % 2 === 0)\n              ? <Alert.Heading>Uai...</Alert.Heading>\n              : <Alert.Heading>Oxi...</Alert.Heading>\n          }\n          <p>Redefina o campo de busca.</p>\n        </Alert>\n      );\n    }\n    if (list.length === 1 && filter === '') {\n      history.push(`${pathname}/${list[0].id}`);\n      return;\n    }\n    return (\n      <section className=\"cards-container\">\n        {list.map((recipe, index) => (\n          <div className=\"cards-main\" key={ `recipe-${index}` }>\n            <RecipeCard\n              type={ type }\n              index={ index }\n              recipe={ recipe }\n            />\n          </div>\n        ))}\n      </section>\n    );\n  };\n\n  useEffect(() => {\n    const reqType = { request: 'filter', key: 'i', parameter: byIngredient };\n    const token = pathname === 'comidas' ? mealsToken : cocktailsToken;\n    dispatch(fetchCategories(token, type));\n    if (byIngredient) {\n      dispatch(fetchRecipes(token, type, reqType));\n      dispatch(byAddIngredient(''));\n    } else {\n      dispatch(fetchRecipes(token, type));\n    }\n  }, [pathname]);\n\n  return (\n    <>\n      <Header />\n      <nav className=\"nav-catogories\">\n        { categories\n          .map((category) => (\n            <CategoryButton\n              name={ category }\n              key={ `btn-${category}` }\n              type={ type }\n            />))}\n        <CategoryButton name=\"All\" type={ type } />\n      </nav>\n      { isFetching ? <Loading /> : renderRecipes() }\n      <Footer />\n    </>\n  );\n}\n\nMain.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}