{"ast":null,"code":"import _slicedToArray from\"/home/alinedebastiani/sd-08-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Redirect}from'react-router';import{Button,Form}from'react-bootstrap';import login from'../actions/login';import'bootstrap/dist/css/bootstrap.min.css';import'./Login.css';function Login(){var dispatch=useDispatch();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),redirect=_useState6[0],setRedirect=_useState6[1];var _useSelector=useSelector(function(state){return state.login;}),mealsToken=_useSelector.mealsToken,user=_useSelector.email,cocktailsToken=_useSelector.cocktailsToken;var validation=function validation(){var minPasswordSize=6;var regex=/.+@[A-z]+[.]com/;var isValidEmail=regex.test(email);var isValidPassword=password.length>minPasswordSize;if(isValidPassword&&isValidEmail){return false;}return true;};var handleSubmit=function handleSubmit(event){event.preventDefault();dispatch(login(email));};useEffect(function(){if(user!==''){localStorage.setItem('mealsToken',mealsToken);localStorage.setItem('user',JSON.stringify({email:user}));localStorage.setItem('cocktailsToken',cocktailsToken);setRedirect(true);}},[user]);if(redirect)return/*#__PURE__*/React.createElement(Redirect,{to:\"/comidas\"});return/*#__PURE__*/React.createElement(\"section\",{className:\"login\"},/*#__PURE__*/React.createElement(\"form\",{className:\"form\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,\"Email:\"),/*#__PURE__*/React.createElement(Form.Control,{\"data-testid\":\"email-input\",type:\"text\",value:email,onChange:function onChange(_ref){var target=_ref.target;return setEmail(target.value);},placeholder:\"Email\"})),/*#__PURE__*/React.createElement(Form.Group,null,/*#__PURE__*/React.createElement(Form.Label,null,\"Senha:\"),/*#__PURE__*/React.createElement(Form.Control,{\"data-testid\":\"password-input\",type:\"password\",value:password,onChange:function onChange(_ref2){var target=_ref2.target;return setPassword(target.value);},placeholder:\"Senha\"})),/*#__PURE__*/React.createElement(Button,{block:true,className:\"custom-btn\",\"data-testid\":\"login-submit-btn\",disabled:validation(),type:\"submit\",variant:\"primary\"},\"Entrar\")));}export default Login;","map":{"version":3,"sources":["/home/alinedebastiani/sd-08-project-recipes-app/src/pages/Login.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Redirect","Button","Form","login","Login","dispatch","email","setEmail","password","setPassword","redirect","setRedirect","state","mealsToken","user","cocktailsToken","validation","minPasswordSize","regex","isValidEmail","test","isValidPassword","length","handleSubmit","event","preventDefault","localStorage","setItem","JSON","stringify","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Redirect } from 'react-router';\nimport { Button, Form } from 'react-bootstrap';\nimport login from '../actions/login';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './Login.css';\n\nfunction Login() {\n  const dispatch = useDispatch();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [redirect, setRedirect] = useState(false);\n\n  const { mealsToken, email: user, cocktailsToken } = useSelector((state) => state.login);\n\n  const validation = () => {\n    const minPasswordSize = 6;\n    const regex = /.+@[A-z]+[.]com/;\n    const isValidEmail = regex.test(email);\n    const isValidPassword = password.length > minPasswordSize;\n    if (isValidPassword && isValidEmail) {\n      return false;\n    }\n    return true;\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    dispatch(login(email));\n  };\n\n  useEffect(() => {\n    if (user !== '') {\n      localStorage.setItem('mealsToken', mealsToken);\n      localStorage.setItem('user', JSON.stringify({ email: user }));\n      localStorage.setItem('cocktailsToken', cocktailsToken);\n      setRedirect(true);\n    }\n  }, [user]);\n\n  if (redirect) return <Redirect to=\"/comidas\" />;\n\n  return (\n    <section className=\"login\">\n      <form className=\"form\" onSubmit={ handleSubmit }>\n        <Form.Group>\n          <Form.Label>Email:</Form.Label>\n          <Form.Control\n            data-testid=\"email-input\"\n            type=\"text\"\n            value={ email }\n            onChange={ ({ target }) => setEmail(target.value) }\n            placeholder=\"Email\"\n          />\n        </Form.Group>\n\n        <Form.Group>\n          <Form.Label>Senha:</Form.Label>\n          <Form.Control\n            data-testid=\"password-input\"\n            type=\"password\"\n            value={ password }\n            onChange={ ({ target }) => setPassword(target.value) }\n            placeholder=\"Senha\"\n          />\n        </Form.Group>\n\n        <Button\n          block\n          className=\"custom-btn\"\n          data-testid=\"login-submit-btn\"\n          disabled={ validation() }\n          type=\"submit\"\n          variant=\"primary\"\n        >\n          Entrar\n        </Button>\n      </form>\n    </section>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}