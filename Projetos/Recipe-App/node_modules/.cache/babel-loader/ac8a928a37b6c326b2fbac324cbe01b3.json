{"ast":null,"code":"var _jsxFileName = \"/home/alinedebastiani/sd-08-project-recipes-app/src/pages/Main.jsx\";\nimport React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router';\nimport RecipeCard from '../components/RecipeCard';\nimport Loading from '../components/Loading';\nimport CategoryButton from '../components/CategoryButton';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { byAddIngredient, fetchCategories, fetchRecipes } from '../actions/recipes';\n\nfunction Main({\n  location: {\n    pathname\n  }\n}) {\n  const {\n    list,\n    isFetching,\n    categories,\n    byIngredient,\n    filter\n  } = useSelector(state => state.recipes);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const type = pathname.slice(1);\n  const token = 1;\n\n  const renderRecipes = () => {\n    if (list.length === 0) {\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n      return;\n    }\n\n    if (list.length === 1 && filter === '') {\n      history.push(`${pathname}/${list[0].id}`);\n      return;\n    }\n\n    return list.map((recipe, index) => /*#__PURE__*/React.createElement(RecipeCard, {\n      type: type,\n      index: index,\n      recipe: recipe,\n      key: `recipe-${index}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  useEffect(() => {\n    const reqType = {\n      request: 'filter',\n      key: 'i',\n      parameter: byIngredient\n    };\n    dispatch(fetchCategories(token, type));\n\n    if (byIngredient) {\n      dispatch(fetchRecipes(token, type, reqType));\n      dispatch(byAddIngredient(''));\n    } else {\n      dispatch(fetchRecipes(token, type));\n    }\n  }, [pathname]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }), categories.map(category => /*#__PURE__*/React.createElement(CategoryButton, {\n    name: category,\n    key: `btn-${category}`,\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(CategoryButton, {\n    name: \"All\",\n    type: type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }), isFetching ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 22\n    }\n  }) : renderRecipes(), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }));\n}\n\nMain.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired\n  }).isRequired\n};\nexport default Main;","map":{"version":3,"sources":["/home/alinedebastiani/sd-08-project-recipes-app/src/pages/Main.jsx"],"names":["React","useEffect","PropTypes","useDispatch","useSelector","useHistory","RecipeCard","Loading","CategoryButton","Header","Footer","byAddIngredient","fetchCategories","fetchRecipes","Main","location","pathname","list","isFetching","categories","byIngredient","filter","state","recipes","dispatch","history","type","slice","token","renderRecipes","length","alert","push","id","map","recipe","index","reqType","request","key","parameter","category","propTypes","shape","string","isRequired"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,eAAT,EAA0BC,eAA1B,EAA2CC,YAA3C,QAA+D,oBAA/D;;AAEA,SAASC,IAAT,CAAc;AAAEC,EAAAA,QAAQ,EAAE;AAAEC,IAAAA;AAAF;AAAZ,CAAd,EAA0C;AACxC,QAAM;AACJC,IAAAA,IADI;AACEC,IAAAA,UADF;AACcC,IAAAA,UADd;AAC0BC,IAAAA,YAD1B;AACwCC,IAAAA;AADxC,MAEFjB,WAAW,CAAEkB,KAAD,IAAWA,KAAK,CAACC,OAAlB,CAFf;AAGA,QAAMC,QAAQ,GAAGrB,WAAW,EAA5B;AACA,QAAMsB,OAAO,GAAGpB,UAAU,EAA1B;AACA,QAAMqB,IAAI,GAAGV,QAAQ,CAACW,KAAT,CAAe,CAAf,CAAb;AACA,QAAMC,KAAK,GAAG,CAAd;;AAEA,QAAMC,aAAa,GAAG,MAAM;AAC1B,QAAIZ,IAAI,CAACa,MAAL,KAAgB,CAApB,EAAuB;AACrBC,MAAAA,KAAK,CAAC,kEAAD,CAAL;AACA;AACD;;AACD,QAAId,IAAI,CAACa,MAAL,KAAgB,CAAhB,IAAqBT,MAAM,KAAK,EAApC,EAAwC;AACtCI,MAAAA,OAAO,CAACO,IAAR,CAAc,GAAEhB,QAAS,IAAGC,IAAI,CAAC,CAAD,CAAJ,CAAQgB,EAAG,EAAvC;AACA;AACD;;AACD,WAAOhB,IAAI,CAACiB,GAAL,CAAS,CAACC,MAAD,EAASC,KAAT,kBACd,oBAAC,UAAD;AACE,MAAA,IAAI,EAAGV,IADT;AAEE,MAAA,KAAK,EAAGU,KAFV;AAGE,MAAA,MAAM,EAAGD,MAHX;AAIE,MAAA,GAAG,EAAI,UAASC,KAAM,EAJxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADK,CAAP;AAOD,GAhBD;;AAkBAnC,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMoC,OAAO,GAAG;AAAEC,MAAAA,OAAO,EAAE,QAAX;AAAqBC,MAAAA,GAAG,EAAE,GAA1B;AAA+BC,MAAAA,SAAS,EAAEpB;AAA1C,KAAhB;AACAI,IAAAA,QAAQ,CAACZ,eAAe,CAACgB,KAAD,EAAQF,IAAR,CAAhB,CAAR;;AACA,QAAIN,YAAJ,EAAkB;AAChBI,MAAAA,QAAQ,CAACX,YAAY,CAACe,KAAD,EAAQF,IAAR,EAAcW,OAAd,CAAb,CAAR;AACAb,MAAAA,QAAQ,CAACb,eAAe,CAAC,EAAD,CAAhB,CAAR;AACD,KAHD,MAGO;AACLa,MAAAA,QAAQ,CAACX,YAAY,CAACe,KAAD,EAAQF,IAAR,CAAb,CAAR;AACD;AACF,GATQ,EASN,CAACV,QAAD,CATM,CAAT;AAWA,sBACE,uDACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEIG,UAAU,CACTe,GADD,CACMO,QAAD,iBACH,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAGA,QAAvB;AAAkC,IAAA,GAAG,EAAI,OAAMA,QAAS,EAAxD;AAA4D,IAAA,IAAI,EAAGf,IAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAFJ,eAKE,oBAAC,cAAD;AAAgB,IAAA,IAAI,EAAC,KAArB;AAA2B,IAAA,IAAI,EAAGA,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EAMIR,UAAU,gBAAG,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAiBW,aAAa,EAN5C,eAOE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CADF;AAWD;;AAEDf,IAAI,CAAC4B,SAAL,GAAiB;AACf3B,EAAAA,QAAQ,EAAEb,SAAS,CAACyC,KAAV,CAAgB;AACxB3B,IAAAA,QAAQ,EAAEd,SAAS,CAAC0C,MAAV,CAAiBC;AADH,GAAhB,EAEPA;AAHY,CAAjB;AAMA,eAAe/B,IAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { useHistory } from 'react-router';\nimport RecipeCard from '../components/RecipeCard';\nimport Loading from '../components/Loading';\nimport CategoryButton from '../components/CategoryButton';\nimport Header from '../components/Header';\nimport Footer from '../components/Footer';\nimport { byAddIngredient, fetchCategories, fetchRecipes } from '../actions/recipes';\n\nfunction Main({ location: { pathname } }) {\n  const {\n    list, isFetching, categories, byIngredient, filter,\n  } = useSelector((state) => state.recipes);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const type = pathname.slice(1);\n  const token = 1;\n\n  const renderRecipes = () => {\n    if (list.length === 0) {\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n      return;\n    }\n    if (list.length === 1 && filter === '') {\n      history.push(`${pathname}/${list[0].id}`);\n      return;\n    }\n    return list.map((recipe, index) => (\n      <RecipeCard\n        type={ type }\n        index={ index }\n        recipe={ recipe }\n        key={ `recipe-${index}` }\n      />));\n  };\n\n  useEffect(() => {\n    const reqType = { request: 'filter', key: 'i', parameter: byIngredient };\n    dispatch(fetchCategories(token, type));\n    if (byIngredient) {\n      dispatch(fetchRecipes(token, type, reqType));\n      dispatch(byAddIngredient(''));\n    } else {\n      dispatch(fetchRecipes(token, type));\n    }\n  }, [pathname]);\n\n  return (\n    <>\n      <Header />\n      { categories\n        .map((category) => (\n          <CategoryButton name={ category } key={ `btn-${category}` } type={ type } />))}\n      <CategoryButton name=\"All\" type={ type } />\n      { isFetching ? <Loading /> : renderRecipes() }\n      <Footer />\n    </>\n  );\n}\n\nMain.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}