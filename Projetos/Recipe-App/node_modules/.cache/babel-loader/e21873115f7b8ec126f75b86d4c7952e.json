{"ast":null,"code":"var _jsxFileName = \"/home/alinedebastiani/sd-08-project-recipes-app/src/pages/RecipeDetails.jsx\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchRecipes, fetchRecommendations } from '../actions/recipes';\nimport Loading from '../components/Loading';\nimport RecipeCard from '../components/RecipeCard';\nimport IngredientsList from '../components/IngredientsList';\nimport ProgressButton from '../components/ProgressButton';\nimport FavButton from '../components/FavButton';\nimport ShareButton from '../components/ShareButton';\nimport './RecipeDetails.css';\n\nfunction RecipeDetails({\n  match: {\n    params\n  },\n  location: {\n    pathname\n  }\n}) {\n  const {\n    list,\n    isFetching,\n    recommendations\n  } = useSelector(state => state.recipes);\n  const {\n    mealsToken,\n    cocktailsToken\n  } = useSelector(state => state.login);\n  const dispatch = useDispatch();\n  const [shouldFetch, setShouldFetch] = useState(true); // const prevList = useRef([...list]);\n  // const selectType = { comidas: 'meals', bebidas: 'drinks' };\n  // const inProgress = pathname.split('/')[3] === 'in-progress';\n  // const type = selectType[pathname.split('/')[1]];\n  // const type = pathname.split('/')[1];\n  // const recommendationsType = type === 'comidas' ? 'bebidas' : 'comidas';\n\n  const inProgress = pathname.split('/')[3] === 'in-progress'; // const inProgress = pathname.split('/')[3] === 'in-progress';\n\n  const type = useRef(pathname.split('/')[1]);\n  const recommendationsType = useRef(type.current === 'comidas' ? 'bebidas' : 'comidas');\n  useEffect(() => {\n    // console.log(recommendationsType);\n    const token = pathname === '/comidas' ? mealsToken : cocktailsToken;\n    setShouldFetch(true);\n    [type.current] = pathname.split('/').slice(1);\n    recommendationsType.current = type.current === 'comidas' ? 'bebidas' : 'comidas';\n    dispatch(fetchRecipes(token, type.current, {\n      request: 'lookup',\n      key: 'i',\n      parameter: params.id\n    }));\n    dispatch(fetchRecommendations(token, recommendationsType.current));\n    setShouldFetch(false);\n  }, [params, pathname]);\n  const recipe = list[0];\n  const IngredientKeys = Object.keys(recipe || {}).filter(ingKey => ingKey.startsWith('strIngredient') && recipe[ingKey] !== '' && recipe[ingKey] !== null);\n  const IngredientsAndMeasures = IngredientKeys.map((key, index) => [recipe[key], recipe[`strMeasure${index + 1}`]]); // const formatedType = type[0].toUpperCase() + type.slice(1, 0 - 1);\n\n  return isFetching || shouldFetch || !recipe ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 44\n    }\n  }) : /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"recipe-photo\",\n    \"data-testid\": \"recipe-photo\",\n    src: recipe.image,\n    alt: recipe.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, recipe.name), /*#__PURE__*/React.createElement(ShareButton, {\n    type: type.current,\n    id: params.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(FavButton, {\n    recipe: recipe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, `${recipe.alcoholicOrNot} ${recipe.category}`), /*#__PURE__*/React.createElement(IngredientsList, {\n    id: params.id,\n    type: type.current,\n    ingredients: IngredientsAndMeasures,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, recipe.strInstructions), recipe.strYoutube && /*#__PURE__*/React.createElement(\"iframe\", {\n    src: recipe.strYoutube.split('watch?v=').join('embed/'),\n    title: \"Video\",\n    \"data-testid\": \"video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }\n  }), !inProgress && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"recommendations\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, recommendations.map((recommendation, index) => /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": `${index}-recomendation-card`,\n    key: `rec-${index}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(RecipeCard, {\n    index: index,\n    type: recommendationsType.current,\n    recipe: recommendation,\n    recommendation: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(ProgressButton, {\n    id: params.id,\n    type: type.current,\n    ingredientsLength: IngredientsAndMeasures.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }));\n}\n\nRecipeDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired\n    }).isRequired\n  }).isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired\n  }).isRequired\n};\nexport default RecipeDetails;","map":{"version":3,"sources":["/home/alinedebastiani/sd-08-project-recipes-app/src/pages/RecipeDetails.jsx"],"names":["React","useEffect","useRef","useState","PropTypes","useDispatch","useSelector","fetchRecipes","fetchRecommendations","Loading","RecipeCard","IngredientsList","ProgressButton","FavButton","ShareButton","RecipeDetails","match","params","location","pathname","list","isFetching","recommendations","state","recipes","mealsToken","cocktailsToken","login","dispatch","shouldFetch","setShouldFetch","inProgress","split","type","recommendationsType","current","token","slice","request","key","parameter","id","recipe","IngredientKeys","Object","keys","filter","ingKey","startsWith","IngredientsAndMeasures","map","index","image","name","alcoholicOrNot","category","strInstructions","strYoutube","join","recommendation","length","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchRecipes, fetchRecommendations } from '../actions/recipes';\n\nimport Loading from '../components/Loading';\nimport RecipeCard from '../components/RecipeCard';\nimport IngredientsList from '../components/IngredientsList';\nimport ProgressButton from '../components/ProgressButton';\nimport FavButton from '../components/FavButton';\nimport ShareButton from '../components/ShareButton';\n\nimport './RecipeDetails.css';\n\nfunction RecipeDetails({ match: { params }, location: { pathname } }) {\n  const { list, isFetching, recommendations } = useSelector((state) => state.recipes);\n  const { mealsToken, cocktailsToken } = useSelector((state) => state.login);\n  const dispatch = useDispatch();\n\n  const [shouldFetch, setShouldFetch] = useState(true);\n  // const prevList = useRef([...list]);\n\n  // const selectType = { comidas: 'meals', bebidas: 'drinks' };\n  // const inProgress = pathname.split('/')[3] === 'in-progress';\n  // const type = selectType[pathname.split('/')[1]];\n  // const type = pathname.split('/')[1];\n  // const recommendationsType = type === 'comidas' ? 'bebidas' : 'comidas';\n\n  const inProgress = pathname.split('/')[3] === 'in-progress';\n  // const inProgress = pathname.split('/')[3] === 'in-progress';\n  const type = useRef(pathname.split('/')[1]);\n  const recommendationsType = useRef(type.current === 'comidas' ? 'bebidas' : 'comidas');\n\n  useEffect(() => {\n    // console.log(recommendationsType);\n    const token = pathname === '/comidas' ? mealsToken : cocktailsToken;\n    setShouldFetch(true);\n    [type.current] = pathname.split('/').slice(1);\n    recommendationsType.current = type.current === 'comidas' ? 'bebidas' : 'comidas';\n    dispatch(fetchRecipes(token, type.current,\n      { request: 'lookup', key: 'i', parameter: params.id }));\n    dispatch(fetchRecommendations(token, recommendationsType.current));\n    setShouldFetch(false);\n  }, [params, pathname]);\n\n  const recipe = list[0];\n  const IngredientKeys = Object.keys(recipe || {})\n    .filter((ingKey) => (\n      ingKey\n        .startsWith('strIngredient')\n        && recipe[ingKey] !== '' && recipe[ingKey] !== null));\n  const IngredientsAndMeasures = IngredientKeys\n    .map((key, index) => [recipe[key], recipe[`strMeasure${index + 1}`]]);\n  // const formatedType = type[0].toUpperCase() + type.slice(1, 0 - 1);\n\n  return (\n    isFetching || shouldFetch || !recipe ? <Loading /> : (\n      <section>\n        <img\n          className=\"recipe-photo\"\n          data-testid=\"recipe-photo\"\n          src={ recipe.image }\n          alt={ recipe.name }\n        />\n        <h1 data-testid=\"recipe-title\">{ recipe.name }</h1>\n        <ShareButton type={ type.current } id={ params.id } />\n        <FavButton recipe={ recipe } />\n        <h2 data-testid=\"recipe-category\">\n          { `${recipe.alcoholicOrNot} ${recipe.category}` }\n        </h2>\n        <IngredientsList\n          id={ params.id }\n          type={ type.current }\n          ingredients={ IngredientsAndMeasures }\n        />\n        <p data-testid=\"instructions\">{ recipe.strInstructions }</p>\n        { recipe.strYoutube\n        && <iframe\n          src={ recipe.strYoutube.split('watch?v=').join('embed/') }\n          title=\"Video\"\n          data-testid=\"video\"\n        /> }\n        { !inProgress && (\n          <div className=\"recommendations\">\n            { recommendations.map((recommendation, index) => (\n              <div data-testid={ `${index}-recomendation-card` } key={ `rec-${index}` }>\n                <RecipeCard\n                  index={ index }\n                  type={ recommendationsType.current }\n                  recipe={ recommendation }\n                  recommendation\n                />\n              </div>)) }\n          </div>)}\n        <ProgressButton\n          id={ params.id }\n          type={ type.current }\n          ingredientsLength={ IngredientsAndMeasures.length }\n        />\n      </section>\n    ));\n}\n\nRecipeDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default RecipeDetails;\n"]},"metadata":{},"sourceType":"module"}